<!DOCTYPE html><head><meta charset="UTF-8"><title>TorqueReaction.md|RACCOON</title><link rel="icon" type="image/x-icon" href="../../media/raccoon_icon.png" sizes="16x16 32x32 64x64 128x128"></link><link href="../../contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"></link><link href="../../contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/alert_moose.css" type="text/css" rel="stylesheet"></link><link href="../../contrib/katex/katex.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/katex_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/content_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/sqa_moose.css" type="text/css" rel="stylesheet"></link><script type="text/javascript" src="../../contrib/jquery/jquery.min.js"></script><script type="text/javascript" src="../../contrib/katex/katex.min.js"></script><script type="text/javascript" src="../../contrib/plotly/plotly.min.js"></script></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="https://hugary1995.github.io/raccoon/index.html" class="left moose-logo hide-on-med-and-down">RACCOON</a><a href="https://github.com/hugary1995/raccoon" class="right"><img src="../../media/framework/github-logo.png" class="github-mark"></img><img src="../../media/framework/github-mark.png" class="github-logo"></img></a><ul class="right hide-on-med-and-down"><li><a href="../../install/index.html">Install</a></li><li><a href="../../theory/index.html">Theory</a></li><li><a href="../../modules/index.html">Modules</a></li><li><a href="../../syntax/index.html">Syntax</a></li><li><a href="../../contribute/index.html">Contribute</a></li></ul><a href="#" class="sidenav-trigger" data-target="938458f9-1a86-4bf8-9bad-46eb1c4db965"><i class="material-icons">menu</i></a><ul class="sidenav" id="938458f9-1a86-4bf8-9bad-46eb1c4db965"><li><a href="../../install/index.html">Install</a></li><li><a href="../../theory/index.html">Theory</a></li><li><a href="../../modules/index.html">Modules</a></li><li><a href="../../syntax/index.html">Syntax</a></li><li><a href="../../contribute/index.html">Contribute</a></li></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div></nav><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="row"><div class="col l12"><div class="input-field"><input type_="text" onkeyup="mooseSearch()" placeholder="https://hugary1995.github.io/raccoon/index.html" id="moose-search-box"></input></div></div><div><div class="col s12" id="moose-search-results"></div></div></div></div><div class="modal-footer"><a href="#!" class="modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="col hide-on-med-and-down l12"><nav class="breadcrumb-nav"><div class="nav-wrapper"><a href=".." class="breadcrumb">source</a><span class="breadcrumb">postprocessors</span><a href="#" class="breadcrumb">TorqueReaction</a></div></nav></div></div><div class="row"><div class="moose-content col s12 m12 l10"><section id="b5926c40-b559-4fb0-af0c-1c67f5d6ef66" data-section-level="1" data-section-text="Torque Reaction"><h1 id="torque-reaction">Torque Reaction</h1><p>TorqueReaction calculates the torque in 2D and 3Dabout a user-specified axis of rotation centeredat a user-specied origin.</p><section class="scrollspy" id="175aaf84-9372-46d7-a7a7-3e072e0fe549" data-section-level="2" data-section-text="Description"><h2 id="description">Description</h2><p>The postprocessor <code>TorqueReaction</code> calculates the applied torque from the reaction forces, coupled as AuxVariables, about a user specified axis of rotation.</p><p>TorqueReaction takes a scalar approach to calculating the sum of the acting torques by projecting both the reaction force vector and the position vector (the coordinates of the node upon which the force is applied) onto the axis of rotation and applying the Pythagorean theorem, as in a statics course.  This scalar approach allows the postprocessor to accept any axis of rotation direction.</p><p>The torque from the reaction forces is calculated, as shown in <a href="#moose-equation-e162594c-78a9-40a2-8656-ad32b16bcd1a">Eq. (1)</a> relative to the user specified axis of rotation origin and direction. <span class="moose-katex-block-equation"><span tex="\begin{aligned}     \boldsymbol{\tau} & = \hat{P}_n \times \mathcal{f} \\     \hat{P}_n & = \left( P_c - P_o \right) - \frac{\left( P_c - P_o \right) \ cdot d}{|d|^2} \cdot d   \end{aligned}" label="eq:calculate_torque_vector" number="1" bookmark="moose-equation-e162594c-78a9-40a2-8656-ad32b16bcd1a" recursive="True" class="moose-katex-equation table-cell" id="moose-equation-e162594c-78a9-40a2-8656-ad32b16bcd1a"></span><span class="moose-katex-equation-number">(1)</span><script>var element = document.getElementById("moose-equation-e162594c-78a9-40a2-8656-ad32b16bcd1a");katex.render("   \\begin{aligned}     \\boldsymbol{\\tau} & = \\hat{P}_n \\times \\mathcal{f} \\\\     \\hat{P}_n & = \\left( P_c - P_o \\right) - \\frac{\\left( P_c - P_o \\right) \\ cdot d}{|d|^2} \\cdot d   \\end{aligned}", element, {displayMode:true,throwOnError:false,macros:{"\\bs":"\\boldsymbol{#1}","\\normal":"\\bs{n}","\\divergence":"\\nabla \\cdot","\\norm":"\\left\\lVert#1\\right\\rVert","\\diff":"\\text{ d}#1","\\total":"\\text{total}","\\internal":"\\text{internal}","\\external":"\\text{external}","\\elastic":"\\text{elastic}","\\fracture":"\\text{fracture}","\\critical":"\\text{critical}","\\activeenergy":"{\\left< A \\right>}","\\inactiveenergy":"{\\left< I \\right>}","\\Gc":"{\\mathcal{G}_c}","\\strain":"\\bs{\\varepsilon}","\\stress":"\\bs{\\sigma}","\\xstress":"\\widetilde{\\stress}","\\macaulay":"\\left<#1\\right>","\\body":"\\Omega","\\bodyboundary":"{\\partial\\body}","\\grad":"\\bs{\\nabla}"}});</script></span> where <span tex="\mathcal{f}" bookmark="moose-equation-f427bef5-ce86-4e08-8504-f67104a6189b" recursive="True" class="moose-katex-inline-equation" id="moose-equation-f427bef5-ce86-4e08-8504-f67104a6189b"><script>var element = document.getElementById("moose-equation-f427bef5-ce86-4e08-8504-f67104a6189b");katex.render("\\mathcal{f}", element, {displayMode:false,throwOnError:false,macros:{"\\bs":"\\boldsymbol{#1}","\\normal":"\\bs{n}","\\divergence":"\\nabla \\cdot","\\norm":"\\left\\lVert#1\\right\\rVert","\\diff":"\\text{ d}#1","\\total":"\\text{total}","\\internal":"\\text{internal}","\\external":"\\text{external}","\\elastic":"\\text{elastic}","\\fracture":"\\text{fracture}","\\critical":"\\text{critical}","\\activeenergy":"{\\left< A \\right>}","\\inactiveenergy":"{\\left< I \\right>}","\\Gc":"{\\mathcal{G}_c}","\\strain":"\\bs{\\varepsilon}","\\stress":"\\bs{\\sigma}","\\xstress":"\\widetilde{\\stress}","\\macaulay":"\\left<#1\\right>","\\body":"\\Omega","\\bodyboundary":"{\\partial\\body}","\\grad":"\\bs{\\nabla}"}});</script></span> is the applied reaction force vector, <span tex="P_c" bookmark="moose-equation-1a554d4a-11fb-49b4-a4ec-21df88465505" recursive="True" class="moose-katex-inline-equation" id="moose-equation-1a554d4a-11fb-49b4-a4ec-21df88465505"><script>var element = document.getElementById("moose-equation-1a554d4a-11fb-49b4-a4ec-21df88465505");katex.render("P_c", element, {displayMode:false,throwOnError:false,macros:{"\\bs":"\\boldsymbol{#1}","\\normal":"\\bs{n}","\\divergence":"\\nabla \\cdot","\\norm":"\\left\\lVert#1\\right\\rVert","\\diff":"\\text{ d}#1","\\total":"\\text{total}","\\internal":"\\text{internal}","\\external":"\\text{external}","\\elastic":"\\text{elastic}","\\fracture":"\\text{fracture}","\\critical":"\\text{critical}","\\activeenergy":"{\\left< A \\right>}","\\inactiveenergy":"{\\left< I \\right>}","\\Gc":"{\\mathcal{G}_c}","\\strain":"\\bs{\\varepsilon}","\\stress":"\\bs{\\sigma}","\\xstress":"\\widetilde{\\stress}","\\macaulay":"\\left<#1\\right>","\\body":"\\Omega","\\bodyboundary":"{\\partial\\body}","\\grad":"\\bs{\\nabla}"}});</script></span> is the current node position, <span tex="P_o" bookmark="moose-equation-c9351593-0620-43fb-ae58-c084d1958bcf" recursive="True" class="moose-katex-inline-equation" id="moose-equation-c9351593-0620-43fb-ae58-c084d1958bcf"><script>var element = document.getElementById("moose-equation-c9351593-0620-43fb-ae58-c084d1958bcf");katex.render("P_o", element, {displayMode:false,throwOnError:false,macros:{"\\bs":"\\boldsymbol{#1}","\\normal":"\\bs{n}","\\divergence":"\\nabla \\cdot","\\norm":"\\left\\lVert#1\\right\\rVert","\\diff":"\\text{ d}#1","\\total":"\\text{total}","\\internal":"\\text{internal}","\\external":"\\text{external}","\\elastic":"\\text{elastic}","\\fracture":"\\text{fracture}","\\critical":"\\text{critical}","\\activeenergy":"{\\left< A \\right>}","\\inactiveenergy":"{\\left< I \\right>}","\\Gc":"{\\mathcal{G}_c}","\\strain":"\\bs{\\varepsilon}","\\stress":"\\bs{\\sigma}","\\xstress":"\\widetilde{\\stress}","\\macaulay":"\\left<#1\\right>","\\body":"\\Omega","\\bodyboundary":"{\\partial\\body}","\\grad":"\\bs{\\nabla}"}});</script></span> is the origin of the axis of rotation, and <span tex="d" bookmark="moose-equation-c9cd6d24-7051-4d0a-9000-042de2da8665" recursive="True" class="moose-katex-inline-equation" id="moose-equation-c9cd6d24-7051-4d0a-9000-042de2da8665"><script>var element = document.getElementById("moose-equation-c9cd6d24-7051-4d0a-9000-042de2da8665");katex.render("d", element, {displayMode:false,throwOnError:false,macros:{"\\bs":"\\boldsymbol{#1}","\\normal":"\\bs{n}","\\divergence":"\\nabla \\cdot","\\norm":"\\left\\lVert#1\\right\\rVert","\\diff":"\\text{ d}#1","\\total":"\\text{total}","\\internal":"\\text{internal}","\\external":"\\text{external}","\\elastic":"\\text{elastic}","\\fracture":"\\text{fracture}","\\critical":"\\text{critical}","\\activeenergy":"{\\left< A \\right>}","\\inactiveenergy":"{\\left< I \\right>}","\\Gc":"{\\mathcal{G}_c}","\\strain":"\\bs{\\varepsilon}","\\stress":"\\bs{\\sigma}","\\xstress":"\\widetilde{\\stress}","\\macaulay":"\\left<#1\\right>","\\body":"\\Omega","\\bodyboundary":"{\\partial\\body}","\\grad":"\\bs{\\nabla}"}});</script></span> is the direction vector of the axis of rotation.  The component of the torque acting along the user specified axis of rotation vector, <span tex="\tau_c" bookmark="moose-equation-007369d8-1c3e-4fc7-8cba-6ff97fbc2266" recursive="True" class="moose-katex-inline-equation" id="moose-equation-007369d8-1c3e-4fc7-8cba-6ff97fbc2266"><script>var element = document.getElementById("moose-equation-007369d8-1c3e-4fc7-8cba-6ff97fbc2266");katex.render("\\tau_c", element, {displayMode:false,throwOnError:false,macros:{"\\bs":"\\boldsymbol{#1}","\\normal":"\\bs{n}","\\divergence":"\\nabla \\cdot","\\norm":"\\left\\lVert#1\\right\\rVert","\\diff":"\\text{ d}#1","\\total":"\\text{total}","\\internal":"\\text{internal}","\\external":"\\text{external}","\\elastic":"\\text{elastic}","\\fracture":"\\text{fracture}","\\critical":"\\text{critical}","\\activeenergy":"{\\left< A \\right>}","\\inactiveenergy":"{\\left< I \\right>}","\\Gc":"{\\mathcal{G}_c}","\\strain":"\\bs{\\varepsilon}","\\stress":"\\bs{\\sigma}","\\xstress":"\\widetilde{\\stress}","\\macaulay":"\\left<#1\\right>","\\body":"\\Omega","\\bodyboundary":"{\\partial\\body}","\\grad":"\\bs{\\nabla}"}});</script></span> is calcuated as <a href="#moose-equation-aed5703a-ae76-4965-a5aa-37aaa634070b">Eq. (2)</a>: <span class="moose-katex-block-equation"><span tex="\tau_c = \frac{\boldsymbol{\tau} \cdot d}{|d|^2} \ cdot d" label="eq:calculate_torque_component" number="2" bookmark="moose-equation-aed5703a-ae76-4965-a5aa-37aaa634070b" recursive="True" class="moose-katex-equation table-cell" id="moose-equation-aed5703a-ae76-4965-a5aa-37aaa634070b"></span><span class="moose-katex-equation-number">(2)</span><script>var element = document.getElementById("moose-equation-aed5703a-ae76-4965-a5aa-37aaa634070b");katex.render("   \\tau_c = \\frac{\\boldsymbol{\\tau} \\cdot d}{|d|^2} \\ cdot d", element, {displayMode:true,throwOnError:false,macros:{"\\bs":"\\boldsymbol{#1}","\\normal":"\\bs{n}","\\divergence":"\\nabla \\cdot","\\norm":"\\left\\lVert#1\\right\\rVert","\\diff":"\\text{ d}#1","\\total":"\\text{total}","\\internal":"\\text{internal}","\\external":"\\text{external}","\\elastic":"\\text{elastic}","\\fracture":"\\text{fracture}","\\critical":"\\text{critical}","\\activeenergy":"{\\left< A \\right>}","\\inactiveenergy":"{\\left< I \\right>}","\\Gc":"{\\mathcal{G}_c}","\\strain":"\\bs{\\varepsilon}","\\stress":"\\bs{\\sigma}","\\xstress":"\\widetilde{\\stress}","\\macaulay":"\\left<#1\\right>","\\body":"\\Omega","\\bodyboundary":"{\\partial\\body}","\\grad":"\\bs{\\nabla}"}});</script></span> where <span tex="\boldsymbol{\tau}" bookmark="moose-equation-52960e24-b530-4007-a883-8013f38ba7e6" recursive="True" class="moose-katex-inline-equation" id="moose-equation-52960e24-b530-4007-a883-8013f38ba7e6"><script>var element = document.getElementById("moose-equation-52960e24-b530-4007-a883-8013f38ba7e6");katex.render("\\boldsymbol{\\tau}", element, {displayMode:false,throwOnError:false,macros:{"\\bs":"\\boldsymbol{#1}","\\normal":"\\bs{n}","\\divergence":"\\nabla \\cdot","\\norm":"\\left\\lVert#1\\right\\rVert","\\diff":"\\text{ d}#1","\\total":"\\text{total}","\\internal":"\\text{internal}","\\external":"\\text{external}","\\elastic":"\\text{elastic}","\\fracture":"\\text{fracture}","\\critical":"\\text{critical}","\\activeenergy":"{\\left< A \\right>}","\\inactiveenergy":"{\\left< I \\right>}","\\Gc":"{\\mathcal{G}_c}","\\strain":"\\bs{\\varepsilon}","\\stress":"\\bs{\\sigma}","\\xstress":"\\widetilde{\\stress}","\\macaulay":"\\left<#1\\right>","\\body":"\\Omega","\\bodyboundary":"{\\partial\\body}","\\grad":"\\bs{\\nabla}"}});</script></span> is the torque vector calculated in <a href="#moose-equation-e162594c-78a9-40a2-8656-ad32b16bcd1a">Eq. (1)</a> and <span tex="d" bookmark="moose-equation-3def13f4-0c09-427c-bacb-4e8836abd78c" recursive="True" class="moose-katex-inline-equation" id="moose-equation-3def13f4-0c09-427c-bacb-4e8836abd78c"><script>var element = document.getElementById("moose-equation-3def13f4-0c09-427c-bacb-4e8836abd78c");katex.render("d", element, {displayMode:false,throwOnError:false,macros:{"\\bs":"\\boldsymbol{#1}","\\normal":"\\bs{n}","\\divergence":"\\nabla \\cdot","\\norm":"\\left\\lVert#1\\right\\rVert","\\diff":"\\text{ d}#1","\\total":"\\text{total}","\\internal":"\\text{internal}","\\external":"\\text{external}","\\elastic":"\\text{elastic}","\\fracture":"\\text{fracture}","\\critical":"\\text{critical}","\\activeenergy":"{\\left< A \\right>}","\\inactiveenergy":"{\\left< I \\right>}","\\Gc":"{\\mathcal{G}_c}","\\strain":"\\bs{\\varepsilon}","\\stress":"\\bs{\\sigma}","\\xstress":"\\widetilde{\\stress}","\\macaulay":"\\left<#1\\right>","\\body":"\\Omega","\\bodyboundary":"{\\partial\\body}","\\grad":"\\bs{\\nabla}"}});</script></span> is the axis of rotation direction vector.</p></section><section class="scrollspy" id="98fd61ee-ac80-4139-ae94-2ccb90e2e9ad" data-section-level="2" data-section-text="Example Input File Syntax"><h2 id="example-input-file-syntax">Example Input File Syntax</h2><pre class="moose-pre"><code class="language-text">[./torque]
  type = TorqueReaction
  boundary = right
  reaction_force_variables = &#x27;saved_x saved_y&#x27;
  direction_vector = &#x27;0. 0. 1.&#x27;
[../]
</code></pre><a href="#6305b89c-ad01-405a-91f5-5f2107801921" class="modal-trigger">(moose/modules/tensor_mechanics/test/tests/torque_reaction/torque_reaction.i)</a><div class="modal moose-modal" id="6305b89c-ad01-405a-91f5-5f2107801921"><div class="modal-content"><h4>/home/travis/build/hugary1995/raccoon/moose/modules/tensor_mechanics/test/tests/torque_reaction/torque_reaction.i</h4><pre class="moose-pre"><code class="language-text"># Scalar torque reaction

# This test computes the sum of the torques acting on a ten element 2D bar mesh
# and is intended to replicate the classical wrench problem from statics.
# A displacement in the y along the right face is applied to the bar end to create
# a shear force along the bar end. The rotation origin default (the global origin)
# and the axis of rotation direction vector used to compute the torque reaction
# is set to (0, 0, 1) out of the plane.
# Torque is calculated for the two nodes on the left of the bar. For the bottom
# node on the right, the torque/ moment lever is the x coordinate value, and for
# the top node on the right the torque lever is the hypotenuse of the x and y
# coordinates.  The expected sum of the torque reaction is just over 37.

[GlobalParams]
  order = FIRST
  family = LAGRANGE
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 1
[]

[Problem]
  extra_tag_vectors = &#x27;ref&#x27;
[]

[AuxVariables]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
[]

[AuxKernels]
  [saved_x]
    type = TagVectorAux
    vector_tag = &#x27;ref&#x27;
    v = &#x27;disp_x&#x27;
    variable = &#x27;saved_x&#x27;
  []
  [saved_y]
    type = TagVectorAux
    vector_tag = &#x27;ref&#x27;
    v = &#x27;disp_y&#x27;
    variable = &#x27;saved_y&#x27;
  []
[]

[Modules/TensorMechanics/Master]
  [master]
    strain = SMALL
    generate_output = &#x27;stress_xx stress_yy&#x27;
    add_variables = true
    extra_vector_tags = &#x27;ref&#x27;
  []
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = left
    value = 0.0
  [../]
  [./right_shear_y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = right
    function = &#x27;0.001*t&#x27;
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeIsotropicElasticityTensor
    youngs_modulus = 207000
    poissons_ratio = 0.3
  [../]
  [./elastic_stress]
    type = ComputeLinearElasticStress
  [../]
[]

[Executioner]
  type = Transient

  line_search = &#x27;none&#x27;

  l_max_its = 30
  nl_max_its = 20
  nl_abs_tol = 1e-12
  nl_rel_tol = 1e-10
  l_tol = 1e-8

  start_time = 0.0
  dt = 0.5

  end_time = 1
  num_steps = 2
[]

[Postprocessors]
  [./_dt]
    type = TimestepSize
  [../]
  [./torque]
    type = TorqueReaction
    boundary = right
    reaction_force_variables = &#x27;saved_x saved_y&#x27;
    direction_vector = &#x27;0. 0. 1.&#x27;
  [../]
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><p>A list of the AuxVariables which save the reaction forces must be provided to the <code>TorqueReaction</code> block.</p><pre class="moose-pre"><code class="language-text">[./saved_x]
[../]
</code></pre><a href="#5d11f617-9e02-4268-a6b0-ba8fb02a1d4b" class="modal-trigger">(moose/modules/tensor_mechanics/test/tests/torque_reaction/torque_reaction.i)</a><div class="modal moose-modal" id="5d11f617-9e02-4268-a6b0-ba8fb02a1d4b"><div class="modal-content"><h4>/home/travis/build/hugary1995/raccoon/moose/modules/tensor_mechanics/test/tests/torque_reaction/torque_reaction.i</h4><pre class="moose-pre"><code class="language-text"># Scalar torque reaction

# This test computes the sum of the torques acting on a ten element 2D bar mesh
# and is intended to replicate the classical wrench problem from statics.
# A displacement in the y along the right face is applied to the bar end to create
# a shear force along the bar end. The rotation origin default (the global origin)
# and the axis of rotation direction vector used to compute the torque reaction
# is set to (0, 0, 1) out of the plane.
# Torque is calculated for the two nodes on the left of the bar. For the bottom
# node on the right, the torque/ moment lever is the x coordinate value, and for
# the top node on the right the torque lever is the hypotenuse of the x and y
# coordinates.  The expected sum of the torque reaction is just over 37.

[GlobalParams]
  order = FIRST
  family = LAGRANGE
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 1
[]

[Problem]
  extra_tag_vectors = &#x27;ref&#x27;
[]

[AuxVariables]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
[]

[AuxKernels]
  [saved_x]
    type = TagVectorAux
    vector_tag = &#x27;ref&#x27;
    v = &#x27;disp_x&#x27;
    variable = &#x27;saved_x&#x27;
  []
  [saved_y]
    type = TagVectorAux
    vector_tag = &#x27;ref&#x27;
    v = &#x27;disp_y&#x27;
    variable = &#x27;saved_y&#x27;
  []
[]

[Modules/TensorMechanics/Master]
  [master]
    strain = SMALL
    generate_output = &#x27;stress_xx stress_yy&#x27;
    add_variables = true
    extra_vector_tags = &#x27;ref&#x27;
  []
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = left
    value = 0.0
  [../]
  [./right_shear_y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = right
    function = &#x27;0.001*t&#x27;
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeIsotropicElasticityTensor
    youngs_modulus = 207000
    poissons_ratio = 0.3
  [../]
  [./elastic_stress]
    type = ComputeLinearElasticStress
  [../]
[]

[Executioner]
  type = Transient

  line_search = &#x27;none&#x27;

  l_max_its = 30
  nl_max_its = 20
  nl_abs_tol = 1e-12
  nl_rel_tol = 1e-10
  l_tol = 1e-8

  start_time = 0.0
  dt = 0.5

  end_time = 1
  num_steps = 2
[]

[Postprocessors]
  [./_dt]
    type = TimestepSize
  [../]
  [./torque]
    type = TorqueReaction
    boundary = right
    reaction_force_variables = &#x27;saved_x saved_y&#x27;
    direction_vector = &#x27;0. 0. 1.&#x27;
  [../]
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><pre class="moose-pre"><code class="language-text">[./saved_y]
[../]
</code></pre><a href="#7da436ce-5262-4a4f-92cf-31f806b419a7" class="modal-trigger">(moose/modules/tensor_mechanics/test/tests/torque_reaction/torque_reaction.i)</a><div class="modal moose-modal" id="7da436ce-5262-4a4f-92cf-31f806b419a7"><div class="modal-content"><h4>/home/travis/build/hugary1995/raccoon/moose/modules/tensor_mechanics/test/tests/torque_reaction/torque_reaction.i</h4><pre class="moose-pre"><code class="language-text"># Scalar torque reaction

# This test computes the sum of the torques acting on a ten element 2D bar mesh
# and is intended to replicate the classical wrench problem from statics.
# A displacement in the y along the right face is applied to the bar end to create
# a shear force along the bar end. The rotation origin default (the global origin)
# and the axis of rotation direction vector used to compute the torque reaction
# is set to (0, 0, 1) out of the plane.
# Torque is calculated for the two nodes on the left of the bar. For the bottom
# node on the right, the torque/ moment lever is the x coordinate value, and for
# the top node on the right the torque lever is the hypotenuse of the x and y
# coordinates.  The expected sum of the torque reaction is just over 37.

[GlobalParams]
  order = FIRST
  family = LAGRANGE
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 1
[]

[Problem]
  extra_tag_vectors = &#x27;ref&#x27;
[]

[AuxVariables]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
[]

[AuxKernels]
  [saved_x]
    type = TagVectorAux
    vector_tag = &#x27;ref&#x27;
    v = &#x27;disp_x&#x27;
    variable = &#x27;saved_x&#x27;
  []
  [saved_y]
    type = TagVectorAux
    vector_tag = &#x27;ref&#x27;
    v = &#x27;disp_y&#x27;
    variable = &#x27;saved_y&#x27;
  []
[]

[Modules/TensorMechanics/Master]
  [master]
    strain = SMALL
    generate_output = &#x27;stress_xx stress_yy&#x27;
    add_variables = true
    extra_vector_tags = &#x27;ref&#x27;
  []
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = left
    value = 0.0
  [../]
  [./right_shear_y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = right
    function = &#x27;0.001*t&#x27;
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeIsotropicElasticityTensor
    youngs_modulus = 207000
    poissons_ratio = 0.3
  [../]
  [./elastic_stress]
    type = ComputeLinearElasticStress
  [../]
[]

[Executioner]
  type = Transient

  line_search = &#x27;none&#x27;

  l_max_its = 30
  nl_max_its = 20
  nl_abs_tol = 1e-12
  nl_rel_tol = 1e-10
  l_tol = 1e-8

  start_time = 0.0
  dt = 0.5

  end_time = 1
  num_steps = 2
[]

[Postprocessors]
  [./_dt]
    type = TimestepSize
  [../]
  [./torque]
    type = TorqueReaction
    boundary = right
    reaction_force_variables = &#x27;saved_x saved_y&#x27;
    direction_vector = &#x27;0. 0. 1.&#x27;
  [../]
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><p>The reaction force AuxVariables must also be computed using the tagging system to save the reactions to a separate vector in the stress divergence kernel, which is handled in this case using the <code>extra_vector_tags</code> parameter in the <code>Master</code> action:</p><pre class="moose-pre"><code class="language-text">[Modules/TensorMechanics/Master]
  [master]
    strain = SMALL
    generate_output = &#x27;stress_xx stress_yy&#x27;
    add_variables = true
    extra_vector_tags = &#x27;ref&#x27;
  []
[]
</code></pre><a href="#9837c769-8804-487a-82dc-e3ded3f005ae" class="modal-trigger">(moose/modules/tensor_mechanics/test/tests/torque_reaction/torque_reaction.i)</a><div class="modal moose-modal" id="9837c769-8804-487a-82dc-e3ded3f005ae"><div class="modal-content"><h4>/home/travis/build/hugary1995/raccoon/moose/modules/tensor_mechanics/test/tests/torque_reaction/torque_reaction.i</h4><pre class="moose-pre"><code class="language-text"># Scalar torque reaction

# This test computes the sum of the torques acting on a ten element 2D bar mesh
# and is intended to replicate the classical wrench problem from statics.
# A displacement in the y along the right face is applied to the bar end to create
# a shear force along the bar end. The rotation origin default (the global origin)
# and the axis of rotation direction vector used to compute the torque reaction
# is set to (0, 0, 1) out of the plane.
# Torque is calculated for the two nodes on the left of the bar. For the bottom
# node on the right, the torque/ moment lever is the x coordinate value, and for
# the top node on the right the torque lever is the hypotenuse of the x and y
# coordinates.  The expected sum of the torque reaction is just over 37.

[GlobalParams]
  order = FIRST
  family = LAGRANGE
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 1
[]

[Problem]
  extra_tag_vectors = &#x27;ref&#x27;
[]

[AuxVariables]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
[]

[AuxKernels]
  [saved_x]
    type = TagVectorAux
    vector_tag = &#x27;ref&#x27;
    v = &#x27;disp_x&#x27;
    variable = &#x27;saved_x&#x27;
  []
  [saved_y]
    type = TagVectorAux
    vector_tag = &#x27;ref&#x27;
    v = &#x27;disp_y&#x27;
    variable = &#x27;saved_y&#x27;
  []
[]

[Modules/TensorMechanics/Master]
  [master]
    strain = SMALL
    generate_output = &#x27;stress_xx stress_yy&#x27;
    add_variables = true
    extra_vector_tags = &#x27;ref&#x27;
  []
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = left
    value = 0.0
  [../]
  [./right_shear_y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = right
    function = &#x27;0.001*t&#x27;
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeIsotropicElasticityTensor
    youngs_modulus = 207000
    poissons_ratio = 0.3
  [../]
  [./elastic_stress]
    type = ComputeLinearElasticStress
  [../]
[]

[Executioner]
  type = Transient

  line_search = &#x27;none&#x27;

  l_max_its = 30
  nl_max_its = 20
  nl_abs_tol = 1e-12
  nl_rel_tol = 1e-10
  l_tol = 1e-8

  start_time = 0.0
  dt = 0.5

  end_time = 1
  num_steps = 2
[]

[Postprocessors]
  [./_dt]
    type = TimestepSize
  [../]
  [./torque]
    type = TorqueReaction
    boundary = right
    reaction_force_variables = &#x27;saved_x saved_y&#x27;
    direction_vector = &#x27;0. 0. 1.&#x27;
  [../]
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><p>The <code>TagVectorAux</code> AuxKernel is used to extract the saved components of the reaction vector from a tagged vector and put them in an AuxVariable. This shows how the <span tex="x" bookmark="moose-equation-06186d3a-c19d-4026-bd62-4ac2ef6bb032" recursive="True" class="moose-katex-inline-equation" id="moose-equation-06186d3a-c19d-4026-bd62-4ac2ef6bb032"><script>var element = document.getElementById("moose-equation-06186d3a-c19d-4026-bd62-4ac2ef6bb032");katex.render("x", element, {displayMode:false,throwOnError:false,macros:{"\\bs":"\\boldsymbol{#1}","\\normal":"\\bs{n}","\\divergence":"\\nabla \\cdot","\\norm":"\\left\\lVert#1\\right\\rVert","\\diff":"\\text{ d}#1","\\total":"\\text{total}","\\internal":"\\text{internal}","\\external":"\\text{external}","\\elastic":"\\text{elastic}","\\fracture":"\\text{fracture}","\\critical":"\\text{critical}","\\activeenergy":"{\\left< A \\right>}","\\inactiveenergy":"{\\left< I \\right>}","\\Gc":"{\\mathcal{G}_c}","\\strain":"\\bs{\\varepsilon}","\\stress":"\\bs{\\sigma}","\\xstress":"\\widetilde{\\stress}","\\macaulay":"\\left<#1\\right>","\\body":"\\Omega","\\bodyboundary":"{\\partial\\body}","\\grad":"\\bs{\\nabla}"}});</script></span> component of this is extracted, and the others are handled in a similar manner:</p><pre class="moose-pre"><code class="language-text">[saved_x]
  type = TagVectorAux
  vector_tag = &#x27;ref&#x27;
  v = &#x27;disp_x&#x27;
  variable = &#x27;saved_x&#x27;
[]
</code></pre><a href="#e65b5c3d-cf15-4889-b415-6c74a74a6a9b" class="modal-trigger">(moose/modules/tensor_mechanics/test/tests/torque_reaction/torque_reaction.i)</a><div class="modal moose-modal" id="e65b5c3d-cf15-4889-b415-6c74a74a6a9b"><div class="modal-content"><h4>/home/travis/build/hugary1995/raccoon/moose/modules/tensor_mechanics/test/tests/torque_reaction/torque_reaction.i</h4><pre class="moose-pre"><code class="language-text"># Scalar torque reaction

# This test computes the sum of the torques acting on a ten element 2D bar mesh
# and is intended to replicate the classical wrench problem from statics.
# A displacement in the y along the right face is applied to the bar end to create
# a shear force along the bar end. The rotation origin default (the global origin)
# and the axis of rotation direction vector used to compute the torque reaction
# is set to (0, 0, 1) out of the plane.
# Torque is calculated for the two nodes on the left of the bar. For the bottom
# node on the right, the torque/ moment lever is the x coordinate value, and for
# the top node on the right the torque lever is the hypotenuse of the x and y
# coordinates.  The expected sum of the torque reaction is just over 37.

[GlobalParams]
  order = FIRST
  family = LAGRANGE
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 1
[]

[Problem]
  extra_tag_vectors = &#x27;ref&#x27;
[]

[AuxVariables]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
[]

[AuxKernels]
  [saved_x]
    type = TagVectorAux
    vector_tag = &#x27;ref&#x27;
    v = &#x27;disp_x&#x27;
    variable = &#x27;saved_x&#x27;
  []
  [saved_y]
    type = TagVectorAux
    vector_tag = &#x27;ref&#x27;
    v = &#x27;disp_y&#x27;
    variable = &#x27;saved_y&#x27;
  []
[]

[Modules/TensorMechanics/Master]
  [master]
    strain = SMALL
    generate_output = &#x27;stress_xx stress_yy&#x27;
    add_variables = true
    extra_vector_tags = &#x27;ref&#x27;
  []
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = left
    value = 0.0
  [../]
  [./right_shear_y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = right
    function = &#x27;0.001*t&#x27;
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeIsotropicElasticityTensor
    youngs_modulus = 207000
    poissons_ratio = 0.3
  [../]
  [./elastic_stress]
    type = ComputeLinearElasticStress
  [../]
[]

[Executioner]
  type = Transient

  line_search = &#x27;none&#x27;

  l_max_its = 30
  nl_max_its = 20
  nl_abs_tol = 1e-12
  nl_rel_tol = 1e-10
  l_tol = 1e-8

  start_time = 0.0
  dt = 0.5

  end_time = 1
  num_steps = 2
[]

[Postprocessors]
  [./_dt]
    type = TimestepSize
  [../]
  [./torque]
    type = TorqueReaction
    boundary = right
    reaction_force_variables = &#x27;saved_x saved_y&#x27;
    direction_vector = &#x27;0. 0. 1.&#x27;
  [../]
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div></section><section class="scrollspy" id="ad76f186-570f-48d2-8298-132ab0319001" data-section-level="2" data-section-text="Input Parameters"><h2 id="input-parameters">Input Parameters</h2><section id="3bd7f24c-b2e1-4497-aec9-d899629639d3" data-section-level="3" data-section-text="Required Parameters" data-details-open="open"><details class="moose-section-content" open="open"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">direction_vector</span><span class="moose-parameter-header-description">The direction vector of the axis of rotation about which the calculated torque is calculated</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>libMesh::VectorValue<double></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The direction vector of the axis of rotation about which the calculated torque is calculated</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">reaction_force_variables</span><span class="moose-parameter-header-description">The reaction variables</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<AuxVariableName></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The reaction variables</p></div></li></ul><summary><h3 data-details-open="open"><span class="moose-section-icon"></span>Required Parameters</h3></summary></details></section><section id="bafb4ae2-ece9-449f-91d7-363bc6a54927" data-section-level="3" data-section-text="Optional Parameters" data-details-open="open"><details class="moose-section-content" open="open"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">axis_origin</span><span class="moose-parameter-header-default">0 0 0</span><span class="moose-parameter-header-description">Origin of the axis of rotation used to calculate the torque</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>0 0 0</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>libMesh::VectorValue<double></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Origin of the axis of rotation used to calculate the torque</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">block</span><span class="moose-parameter-header-description">The list of block ids (SubdomainID) that this object will be applied</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<SubdomainName></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The list of block ids (SubdomainID) that this object will be applied</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">boundary</span><span class="moose-parameter-header-description">The list of boundary IDs from the mesh where this boundary condition applies</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<BoundaryName></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The list of boundary IDs from the mesh where this boundary condition applies</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">execute_on</span><span class="moose-parameter-header-default">TIMESTEP_END</span><span class="moose-parameter-header-description">The list of flag(s) indicating when this object should be executed, the available options include NONE, INITIAL, LINEAR, NONLINEAR, TIMESTEP_END, TIMESTEP_BEGIN, FINAL, CUSTOM.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>TIMESTEP_END</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>ExecFlagEnum</p><p class="moose-parameter-description-options"><span>Options:</span>NONE INITIAL LINEAR NONLINEAR TIMESTEP_END TIMESTEP_BEGIN FINAL CUSTOM TRANSFER</p><p class="moose-parameter-description"><span>Description:</span>The list of flag(s) indicating when this object should be executed, the available options include NONE, INITIAL, LINEAR, NONLINEAR, TIMESTEP_END, TIMESTEP_BEGIN, FINAL, CUSTOM.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">unique_node_execute</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">When false (default), block restricted objects will have the execute method called multiple times on a single node if the node lies on a interface between two subdomains.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>When false (default), block restricted objects will have the execute method called multiple times on a single node if the node lies on a interface between two subdomains.</p></div></li></ul><summary><h3 data-details-open="open"><span class="moose-section-icon"></span>Optional Parameters</h3></summary></details></section><section id="7ad2dd64-b624-40d8-98be-11bd6eeeb27b" data-section-level="3" data-section-text="Advanced Parameters" data-details-open="close"><details class="moose-section-content"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">allow_duplicate_execution_on_initial</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">In the case where this UserObject is depended upon by an initial condition, allow it to be executed twice during the initial setup (once before the IC and again after mesh adaptivity (if applicable).</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>In the case where this UserObject is depended upon by an initial condition, allow it to be executed twice during the initial setup (once before the IC and again after mesh adaptivity (if applicable).</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">control_tags</span><span class="moose-parameter-header-description">Adds user-defined labels for accessing object parameters via control logic.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<std::string></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Adds user-defined labels for accessing object parameters via control logic.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">enable</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Set the enabled status of the MooseObject.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Set the enabled status of the MooseObject.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">outputs</span><span class="moose-parameter-header-description">Vector of output names were you would like to restrict the output of variables(s) associated with this object</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<OutputName></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Vector of output names were you would like to restrict the output of variables(s) associated with this object</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">seed</span><span class="moose-parameter-header-default">0</span><span class="moose-parameter-header-description">The seed for the master random number generator</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>0</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>unsigned int</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The seed for the master random number generator</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">use_displaced_mesh</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Whether or not this object should use the displaced mesh for computation.  Note that in the case this is true but no displacements are provided in the Mesh block the undisplaced mesh will still be used.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Whether or not this object should use the displaced mesh for computation.  Note that in the case this is true but no displacements are provided in the Mesh block the undisplaced mesh will still be used.</p></div></li></ul><summary><h3 data-details-open="close"><span class="moose-section-icon"></span>Advanced Parameters</h3></summary></details></section></section></section></div><div class="col hide-on-med-and-down l2"><div class="toc-wrapper pin-top"><ul class="section table-of-contents"><li><a href="#175aaf84-9372-46d7-a7a7-3e072e0fe549" class="tooltipped" data-position="left" data-tooltip="Description">Description</a></li><li><a href="#98fd61ee-ac80-4139-ae94-2ccb90e2e9ad" class="tooltipped" data-position="left" data-tooltip="Example Input File Syntax">Example Input File Syntax</a></li><li><a href="#ad76f186-570f-48d2-8298-132ab0319001" class="tooltipped" data-position="left" data-tooltip="Input Parameters">Input Parameters</a></li></ul></div></div></div></div></main></div></body><script type="text/javascript" src="../../contrib/materialize/materialize.min.js"></script><script type="text/javascript" src="../../contrib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="../../contrib/prism/prism.min.js"></script><script type="text/javascript" src="../../js/init.js"></script><script type="text/javascript" src="../../js/navigation.js"></script><script type="text/javascript" src="../../contrib/fuse/fuse.min.js"></script><script type="text/javascript" src="../../js/search_index.js"></script><script type="text/javascript" src="../../js/sqa_moose.js"></script>